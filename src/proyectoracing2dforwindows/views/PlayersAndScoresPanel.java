/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JPanel.java to edit this template
 */
package proyectoracing2dforwindows.views;

import java.awt.Dimension;
import java.awt.Font;
import java.util.ArrayList;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import proyectoracing2dforwindows.exceptions.DuplicateScoreException;
import proyectoracing2dforwindows.exceptions.FileManagerException;
import proyectoracing2dforwindows.exceptions.InvalidMapFormatException;
import proyectoracing2dforwindows.exceptions.MapFileNotFoundException;
import proyectoracing2dforwindows.interfaces.ClickListener;
import proyectoracing2dforwindows.interfaces.Configurable;

/**
 *
 * @author usuario
 */
public class PlayersAndScoresPanel extends javax.swing.JPanel {

    ArrayList<String> names;//Se guardan los nombres de los jugadores
    ArrayList<Integer> scores;//Se guardan los puntajes de los jugadores
    private ClickListener clickListener;
    private Configurable configurable;
    private int player;
    
    
    public PlayersAndScoresPanel(ArrayList<String> names,
    ArrayList<Integer> scores, int player, Configurable configurable, ClickListener clickListener) {
        initComponents();
        this.names = names;
        this.scores = scores;
        this.configurable = configurable;
        this.player = player;
        this.tName.setText(configurable.getScorePlayerName(player));
        this.clickListener=clickListener;
    }
    
    public void showScores(){
        int y;
        for(int i = 0; i < names.size(); i++){
            y = (100*i) + 20;
            JLabel labelName = new JLabel(names.get(i));
            labelName.setBounds(30, y, 350, 80);
            labelName.setFont(new Font("Tw Cen MT", Font.PLAIN, 70));
            
            JLabel labelPoint = new JLabel(""+scores.get(i));
            labelPoint.setBounds(520, y, 300, 80);
            labelPoint.setFont(new Font("Tw Cen MT", Font.PLAIN, 70));
            
            PanelScores.add(labelName);
            PanelScores.add(labelPoint);
        }
        PanelScores.setPreferredSize(new Dimension(870, names.size()*100));
        PanelScores.revalidate();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        ScrollScores = new javax.swing.JScrollPane();
        PanelScores = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        bSelect = new javax.swing.JButton();
        jLabel3 = new javax.swing.JLabel();
        tName = new javax.swing.JTextField();
        bCreate = new javax.swing.JButton();
        bReturn = new javax.swing.JButton();

        setPreferredSize(new java.awt.Dimension(900, 900));
        setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        PanelScores.setPreferredSize(new java.awt.Dimension(870, 550));

        javax.swing.GroupLayout PanelScoresLayout = new javax.swing.GroupLayout(PanelScores);
        PanelScores.setLayout(PanelScoresLayout);
        PanelScoresLayout.setHorizontalGroup(
            PanelScoresLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 888, Short.MAX_VALUE)
        );
        PanelScoresLayout.setVerticalGroup(
            PanelScoresLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 550, Short.MAX_VALUE)
        );

        ScrollScores.setViewportView(PanelScores);

        add(ScrollScores, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 110, 900, 420));

        jLabel1.setFont(new java.awt.Font("Tw Cen MT", 3, 70)); // NOI18N
        jLabel1.setText("Names:");
        add(jLabel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 20, -1, -1));

        jLabel2.setFont(new java.awt.Font("Tw Cen MT", 3, 70)); // NOI18N
        jLabel2.setText("Scores:");
        add(jLabel2, new org.netbeans.lib.awtextra.AbsoluteConstraints(530, 20, -1, -1));

        bSelect.setFont(new java.awt.Font("Tw Cen MT", 0, 60)); // NOI18N
        bSelect.setText("Select");
        bSelect.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bSelectActionPerformed(evt);
            }
        });
        add(bSelect, new org.netbeans.lib.awtextra.AbsoluteConstraints(670, 750, 200, -1));

        jLabel3.setFont(new java.awt.Font("Tw Cen MT", 0, 75)); // NOI18N
        jLabel3.setText("Name:");
        add(jLabel3, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 670, -1, -1));

        tName.setFont(new java.awt.Font("Tw Cen MT", 0, 50)); // NOI18N
        tName.setForeground(new java.awt.Color(102, 102, 102));
        tName.setText("Name...");
        add(tName, new org.netbeans.lib.awtextra.AbsoluteConstraints(240, 670, 400, 90));

        bCreate.setFont(new java.awt.Font("Tw Cen MT", 0, 60)); // NOI18N
        bCreate.setText("Create");
        bCreate.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bCreateActionPerformed(evt);
            }
        });
        add(bCreate, new org.netbeans.lib.awtextra.AbsoluteConstraints(670, 600, 200, -1));

        bReturn.setText("RETURN");
        bReturn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bReturnActionPerformed(evt);
            }
        });
        add(bReturn, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 790, -1, -1));
    }// </editor-fold>//GEN-END:initComponents

    private void bCreateActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bCreateActionPerformed
        String name = tName.getText();
        try {
            configurable.addScorePlayer(player, name);
            configurable.selectScorePlayerName(player, name);
        } catch (DuplicateScoreException ex) {
            JOptionPane.showMessageDialog(this,
            "An error occurred while initializing the game: " + ex.getMessage(),
            "Initialization Error",
            JOptionPane.ERROR_MESSAGE);
          }
        
        
        
    }//GEN-LAST:event_bCreateActionPerformed

    private void bSelectActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bSelectActionPerformed
        
        String name = tName.getText();
        configurable.selectScorePlayerName(player, name);
    }//GEN-LAST:event_bSelectActionPerformed

    private void bReturnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bReturnActionPerformed
        
        
            // TODO add your handling code here:
            clickListener.showOptionsPanel();
        
        
    }//GEN-LAST:event_bReturnActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JPanel PanelScores;
    private javax.swing.JScrollPane ScrollScores;
    private javax.swing.JButton bCreate;
    private javax.swing.JButton bReturn;
    private javax.swing.JButton bSelect;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JTextField tName;
    // End of variables declaration//GEN-END:variables
}
